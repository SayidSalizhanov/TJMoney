<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Настройки пользователя</title>
    <link rel="stylesheet" th:href="@{/css/user/userSettings.css}">
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>

<div class="content">
    <div class="settings">
        <h2>Настройки профиля</h2>

        <div class="settings-section">
            <h3>Основная информация</h3>
            <form th:action="@{/user/{id}/settings(id=${userId})}" method="POST" class="settings-form">
                <input type="hidden" name="userId" th:value="${userId}">
                
                <div class="form-group">
                    <label for="username">Имя пользователя:</label>
                    <input type="text" id="username" name="username" th:value="${settings.username}" required>
                </div>

                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" th:value="${settings.email}" required>
                </div>

                <button type="submit" class="save-button">Сохранить изменения</button>
            </form>
        </div>

        <div class="settings-section">
            <h3>Смена пароля</h3>
            <form th:action="@{/user/{id}/changePassword(id=${userId})}" method="POST" class="password-form">
                <input type="hidden" name="userId" th:value="${userId}">
                
                <div class="form-group">
                    <label for="currentPassword">Текущий пароль:</label>
                    <input type="password" id="currentPassword" name="currentPassword" required>
                </div>

                <div class="form-group">
                    <label for="newPassword">Новый пароль:</label>
                    <input type="password" id="newPassword" name="newPassword" required>
                </div>

                <div class="form-group">
                    <label for="repeatNewPassword">Повторите новый пароль:</label>
                    <input type="password" id="repeatNewPassword" name="repeatNewPassword" required>
                </div>

                <button type="submit" class="save-button">Изменить пароль</button>
            </form>
        </div>

        <div class="settings-section">
            <h3>Аватар</h3>
            <form th:action="@{/user/{id}/changeAvatar(id=${userId})}" method="POST" enctype="multipart/form-data" class="avatar-form">
                <input type="hidden" name="userId" th:value="${userId}">
                
                <div class="form-group">
                    <label for="avatarImage">Выберите новый аватар:</label>
                    <input type="file" id="avatarImage" name="avatarImage" accept="image/*">
                </div>

                <button type="submit" class="save-button">Загрузить аватар</button>
            </form>

            <form th:action="@{/user/{id}/changeAvatar(id=${userId})}" method="POST" class="delete-avatar-form">
                <input type="hidden" name="userId" th:value="${userId}">
                <input type="hidden" name="_method" value="DELETE">
                <button type="submit" class="delete-button">Удалить аватар</button>
            </form>
        </div>

        <div class="settings-section danger-zone">
            <h3>Опасная зона</h3>
            <form th:action="@{/user/{id}(id=${userId})}" method="POST" class="delete-account-form">
                <input type="hidden" name="userId" th:value="${userId}">
                <input type="hidden" name="_method" value="DELETE">
                <button type="submit" class="delete-account-button">Удалить аккаунт</button>
            </form>
        </div>
    </div>
</div>
</body>
</html> 